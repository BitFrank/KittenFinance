class BVSelect{constructor({selector:e="defaultId",width:t="100%",searchbox:n=!1,search_autofocus:o=!1,offset:s=!0,search_placeholder:l="Search...",placeholder:i="Select Option",breakpoint:r="600"}){var a=l,d=i,c=0,u=[],m="",y=e.substring(1);this.selector=e.substring(1);var b=this.selector;function g(){var e=Math.max(document.documentElement.clientHeight||0,window.innerHeight||0),t=document.getElementById("ul_"+b).lastChild.getBoundingClientRect().top;Math.round(t+50)>Math.round(e)?(c=b,document.getElementById("ul_"+b).style.position="fixed",document.getElementById("ul_"+b).style.bottom="0px"):(c=0,document.getElementById("ul_"+b).style.position="absolute",document.getElementById("ul_"+b).style.bottom="")}this.searchbox=n,this.width=t,this.offset=s,this.randomID=b,this.search_placeholder,this.breakpoint=r,this.search_autofocus=o,document.getElementById(this.selector).style.display="none",this.SetupListOptions=function(){for(var e=document.getElementById(this.selector),t=0;t<e.length;t++){var n=e[t].text,o=(e[t].value,e[t].disabled),s=e[t].getAttribute("data-separator"),l=e[t].getAttribute("data-img"),i=e[t].getAttribute("data-icon");if(1==o)var r="bv_disabled";else r="";if(s)var a="bv_separator";else a="";if(l)var c="<img src="+l+">";else if(i)c="<i class='"+i+"' aria-hidden='true'></i>";else c="";document.getElementById("ul_"+b).insertAdjacentHTML("beforeend","<li class='"+r+" "+a+"'  > "+c+" "+n+"</li>")}document.querySelectorAll("#ul_"+b+" li").forEach((t=>{t.addEventListener("click",(n=>{const o=Array.from(t.parentNode.children).indexOf(t);var s=document.getElementById(this.selector);if(1==this.searchbox)var l=-1;else l="";if(t.classList.contains("bv_disabled")||t.classList.contains("bv_nofocus")||t.classList.contains("bv_separator"));else{if(s.attributes.multiple){var i="";if(event.preventDefault(),u.indexOf(o)>-1){var r=u.indexOf(o);u.splice(r,1),document.getElementById(this.selector)[o+l].selected=!1,t.style.backgroundColor="transparent"}else u.push(o),t.style.backgroundColor="#ececec";if(0==u.length)i=d;else{for(var a=0;a<u.length;a++){var c=u[a];document.getElementById(this.selector).getElementsByTagName("option")[c+l].selected="selected",i+=", "+s[c-1].innerHTML}i=i.substring(2)}document.getElementById("main_"+b).innerHTML=i+"<i id='arrow_"+b+"' class='arrows_bv bv_arrow bv_down'></i>"}else{var m=document.getElementById(this.selector).getElementsByTagName("option")[o+l];m.selected="selected",null!=e.getAttribute("onchange")&&document.getElementById(this.selector).onchange(),document.getElementById("main_"+b).innerHTML=`<img src="${m.getAttribute("data-img")}">`+t.textContent+"<i id='arrow_"+b+"' class='arrows_bv bv_arrow bv_down'></i>",document.getElementById("ul_"+b).style.display="none",document.body.classList.remove("bv_stop-scrolling"),document.body.contains(document.getElementById("deletebg"))&&document.getElementById("deletebg").remove(),g()}1==this.searchbox&&(document.getElementById("input_"+b).value="",Array.from(document.querySelectorAll("#ul_"+b+" li")).forEach((function(e){e.style.display="block"})))}}))}))},this.CriarDivBase=function(){document.getElementById(this.selector).insertAdjacentHTML("afterend",'<div id="bv_'+b+'" data-search="'+this.searchbox+'" class="bv_mainselect"></div>'),document.getElementById("bv_"+b).insertAdjacentHTML("afterbegin",'<div id="main_'+b+'" style="width:'+this.width+';" class="bv_atual bv_background"></div><ul id="ul_'+b+'" class="bv_ul_inner bv_background"></ul>');var e=document.getElementById("ul_"+b),t=(document.getElementById("bv_"+b),document.getElementById("main_"+b).offsetWidth);e.style.width=t+"px",1==this.searchbox&&document.querySelector("#ul_"+b).insertAdjacentHTML("afterbegin",'<li class="bv_nofocus"><div class="bv_innerinput"><input placeholder="'+a+'" class="bv_input" id="input_'+b+'" type="text"></div</li>');var l=document.getElementById(this.selector);if(l.attributes.multiple)m=d;else{for(var i=0;i<l.length;i++)if(""==l[i].getAttribute("selected"))var c=1;m=1==c?l.options[l.selectedIndex].text:d}var u=l.options[l.selectedIndex];document.getElementById("main_"+b).innerHTML=`<img src="${u.getAttribute("data-img")}">`+m+"<i id='arrow_"+b+"' class='arrows_bv bv_arrow bv_down'></i>",document.getElementById("main_"+b).addEventListener("click",(function(){document.getElementById("ul_"+b).style.position="absolute",document.getElementById("ul_"+b).style.bottom="",window.innerWidth<r?(document.getElementById("ul_"+b).classList.add("bv_ul_mobile"),document.getElementById(y).insertAdjacentHTML("afterend",'<div id="deletebg" class="bv_ul_bg"></div>'),document.body.classList.add("bv_stop-scrolling")):document.getElementById("ul_"+b).classList.remove("bv_ul_mobile");var t,l,i=document.getElementById("main_"+b).offsetWidth;e.style.width=i+"px","block"==document.getElementById("ul_"+b).style.display?(document.getElementById("ul_"+b).style.display="none",Array.from(document.querySelectorAll(".arrows_bv")).forEach((function(e){e.classList.remove("bv_up"),e.classList.add("bv_down")}))):(Array.from(document.querySelectorAll(".bv_ul_inner")).forEach((function(e){e.style.display="none"})),(t=document.getElementById("ul_"+b)).style.opacity=0,t.style.display=l||"block",function e(){var n=parseFloat(t.style.opacity);(n+=.1)>1||(t.style.opacity=n,requestAnimationFrame(e))}(),Array.from(document.querySelectorAll(".arrows_bv")).forEach((function(e){e.classList.remove("bv_up"),e.classList.add("bv_down")})),document.querySelector("#arrow_"+b).classList.remove("bv_down"),document.querySelector("#arrow_"+b).classList.add("bv_up")),1==s&&g(),1==o&&1==n&&document.getElementById("input_"+b).focus()}),!1),this.SetupListOptions()},this.CriarDivBase(),document.addEventListener("scroll",(function(){0!=c&&(Math.max(document.documentElement.clientHeight||0,window.innerHeight||0)-document.getElementById("main_"+b).lastChild.getBoundingClientRect().top>document.getElementById("ul_"+b).clientHeight&&g())}),!1),1==this.searchbox&&document.getElementById("input_"+b).addEventListener("keyup",(function(){var e,t,n;for(e=document.getElementById("input_"+b).value.toUpperCase(),t=document.getElementById("ul_"+b).getElementsByTagName("li"),Array.from(document.querySelectorAll(".bv_separator")).forEach((function(e){e.style.display="none"})),n=0;n<t.length;n++)""==e?Array.from(document.querySelectorAll("#ul_"+b+" li")).forEach((function(e){e.style.display="block"})):(t[n].innerText||t[n].textContent).toUpperCase().indexOf(e)>-1&&!t[n].classList.contains("bv_separator")?t[n].style.display="":t[n].classList.contains("bv_nofocus")||(t[n].style.display="none")}),!1),document.addEventListener("click",(function(e){e.target.closest(".bv_ul_inner")&&event.target.classList.contains("bv_input")||event.target.classList.contains("bv_input")||event.target.classList.contains("bv_atual")||"LI"!=event.target.nodeName&&(Array.from(document.querySelectorAll(".bv_ul_inner")).forEach((function(e){e.style.display="none"})),Array.from(document.querySelectorAll(".arrows_bv")).forEach((function(e){e.classList.remove("bv_up"),e.classList.add("bv_down")})),Array.from(document.querySelectorAll("#input_"+b)).forEach((function(e){e.value=""})),Array.from(document.querySelectorAll("#ul_"+b+" li")).forEach((function(e){e.style.display="block"})),document.body.classList.remove("bv_stop-scrolling"),document.body.contains(document.getElementById("deletebg"))&&document.getElementById("deletebg").remove(),document.getElementById("ul_"+b)&&(c=0,document.getElementById("ul_"+b).style.position="absolute",document.getElementById("ul_"+b).style.bottom=""))}),!0)}Destroy(){document.getElementById("bv_"+this.randomID).remove(),document.getElementById(this.selector).style.display="block"}Update(){Array.from(document.querySelectorAll("#ul_"+this.randomID+" li")).forEach((function(e){e.classList.contains("bv_nofocus")||e.remove()})),this.SetupListOptions()}GetID(){return this.randomID}Change(e){if(e.placeholder&&(document.getElementById("main_"+this.randomID).innerHTML=e.placeholder+"<i id='arrow_"+this.randomID+"' class='arrows_bv bv_arrow bv_down'></i>"),e.search_placeholder&&(document.getElementById("input_"+this.randomID).placeholder=e.search_placeholder),e.options&&"object"==typeof e.options){document.querySelector("#"+this.selector).innerHTML="";for(var t=Object.keys(e.options).length,n=0;n<t;n++){var o,s,l,i;o=1==e.options[n].disabled?"disabled":"",s=1==e.options[n].separator?"data-separator='true'":"",l=e.options[n].img?"data-img='"+e.options[n].img+"'":"",i=e.options[n].icon?"data-icon='"+e.options[n].icon+"'":"",document.getElementById(this.selector).insertAdjacentHTML("beforeend","<option "+l+" "+i+" "+s+" "+o+" value="+e.options[n].value+" >"+e.options[n].inner_text+"</option>")}}else console.error("Options must be and Object. Read documentation.")}SetOption(e){var t=document.getElementById(this.selector);if("byIndex"==e.type)t.selectedIndex=e.value,null!=t.getAttribute("onchange")&&document.getElementById(this.selector).onchange(),document.getElementById("main_"+this.randomID).innerHTML=t.options[t.selectedIndex].text+"<i id='arrow_"+this.randomID+"' class='arrows_bv bv_arrow bv_down'></i>";else if("byValue"==e.type)for(var n=0;n<t.length;n++)t[n].value==e.value&&(t.selectedIndex=t[n].index,null!=t.getAttribute("onchange")&&document.getElementById(this.selector).onchange(),document.getElementById("main_"+this.randomID).innerHTML=`<img src="${t[n].getAttribute("data-img")}">`+t[n].innerText+"<i id='arrow_"+this.randomID+"' class='arrows_bv bv_arrow bv_down'></i>")}AppendOption(e){if(console.log(e),null==(t=e.position))var t="beforeend";if(e.options&&"object"==typeof e.options)for(var n=Object.keys(e.options).length,o=0;o<n;o++){var s,l,i,r;s=1==e.options[o].disabled?"disabled":"",l=1==e.options[o].separator?"data-separator='true'":"",i=e.options[o].img?"data-img='"+e.options[o].img+"'":"",r=e.options[o].icon?"data-icon='"+e.options[o].icon+"'":"",document.getElementById(this.selector).insertAdjacentHTML(t,"<option "+i+" "+r+" "+l+" "+s+" value="+e.options[o].value+" >"+e.options[o].inner_text+"</option>")}else console.error("Options must be and Object. Read documentation.")}}